/* ULTRA-CRITICAL FIXES FOR DARK MODE - MAXIMUM PRIORITY */

/* FIX SCROLLBAR IN ROUNDED MODALS - Keep scrollbar but inside corners */
/* Style modal scrollbars to be sleek and stay within bounds */
.fixed ::-webkit-scrollbar,
[role="dialog"] ::-webkit-scrollbar {
  width: 8px !important;
  height: 8px !important;
}

.fixed ::-webkit-scrollbar-track,
[role="dialog"] ::-webkit-scrollbar-track {
  background: transparent !important;
  margin: 12px 0 !important; /* Keep scrollbar away from top/bottom rounded corners */
}

.fixed ::-webkit-scrollbar-thumb,
[role="dialog"] ::-webkit-scrollbar-thumb {
  background: rgba(156, 163, 175, 0.4) !important;
  border-radius: 4px !important;
}

.fixed ::-webkit-scrollbar-thumb:hover,
[role="dialog"] ::-webkit-scrollbar-thumb:hover {
  background: rgba(156, 163, 175, 0.6) !important;
}

/* Dark mode scrollbar colors */
.dark .fixed ::-webkit-scrollbar-thumb,
.dark [role="dialog"] ::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2) !important;
}

.dark .fixed ::-webkit-scrollbar-thumb:hover,
.dark [role="dialog"] ::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3) !important;
}

/* CRITICAL LIGHT MODE FIX - Ensure all inputs are white in light mode */
:root:not(.dark) input,
:root:not(.dark) select,
:root:not(.dark) textarea {
  background: white !important;
  border: 1px solid #d1d5db !important;
  color: #111827 !important;
}

/* iOS Safari Fix - Ensure proper height for form elements */
input,
select:not(.bg-transparent),
textarea {
  -webkit-appearance: none !important;
  -moz-appearance: none !important;
  appearance: none !important;
  min-height: 48px !important;
  padding: 12px 16px !important;
  font-size: 16px !important; /* Prevents zoom on iOS */
  line-height: 1.5 !important;
  border-radius: 8px !important;
}

/* Specific iOS select dropdown fix - ONLY for form selects, not transparent ones */
select:not(.bg-transparent) {
  background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e") !important;
  background-position: right 12px center !important;
  background-repeat: no-repeat !important;
  background-size: 20px !important;
  padding-right: 40px !important;
}

/* Dark mode dropdown arrow - ONLY for form selects */
.dark select:not(.bg-transparent) {
  background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%23e5e7eb' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e") !important;
}

/* TRANSPARENT/COMPACT SELECTORS - Lightweight border with arrow */
select.bg-transparent,
select[class*="bg-transparent"],
select[class*="border-0"][class*="bg-transparent"] {
  /* KILL ALL NATIVE STYLING */
  -webkit-appearance: none !important;
  -moz-appearance: none !important;
  appearance: none !important;
  
  /* MINIMAL COMPACT DESIGN WITH VISIBLE BORDER */
  background: rgba(255, 255, 255, 0.8) !important;
  border: 1px solid rgba(156, 163, 175, 0.4) !important;
  border-radius: 6px !important;
  padding: 4px 20px 4px 8px !important;
  font-size: 13px !important;
  color: #6b7280 !important;
  cursor: pointer !important;
  min-height: 28px !important;
  height: 28px !important;
  line-height: 20px !important;
  
  /* SINGLE CUSTOM ARROW - Light mode */
  background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M6 8l4 4 4-4'/%3e%3c/svg%3e") !important;
  background-position: right 4px center !important;
  background-repeat: no-repeat !important;
  background-size: 12px !important;
}

select.bg-transparent:focus,
select[class*="bg-transparent"]:focus,
select[class*="border-0"][class*="bg-transparent"]:focus {
  outline: none !important;
  border-color: #f97316 !important;
  box-shadow: 0 0 0 2px rgba(249, 115, 22, 0.2) !important;
}

/* Dark mode transparent selectors - HIGHEST SPECIFICITY */
html.dark select.bg-transparent,
html.dark select[class*="bg-transparent"], 
html.dark select[class*="border-0"][class*="bg-transparent"],
.dark select.bg-transparent.bg-transparent,
.dark select[class*="bg-transparent"][class*="bg-transparent"],
.dark select[class*="border-0"][class*="bg-transparent"][class*="bg-transparent"] {
  background: rgba(255, 255, 255, 0.08) !important;
  border: 1px solid rgba(255, 255, 255, 0.2) !important;
  color: #e5e7eb !important;
  background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%23e5e7eb' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M6 8l4 4 4-4'/%3e%3c/svg%3e") !important;
  background-position: right 4px center !important;
  background-repeat: no-repeat !important;
  background-size: 12px !important;
}

html.dark select.bg-transparent:focus,
html.dark select[class*="bg-transparent"]:focus,
html.dark select[class*="border-0"][class*="bg-transparent"]:focus,
.dark select.bg-transparent.bg-transparent:focus,
.dark select[class*="bg-transparent"][class*="bg-transparent"]:focus,
.dark select[class*="border-0"][class*="bg-transparent"][class*="bg-transparent"]:focus {
  border-color: #f97316 !important;
  box-shadow: 0 0 0 2px rgba(249, 115, 22, 0.3) !important;
}

/* FIX OVERLAPPING ARROWS - Remove native arrows from options */
select.bg-transparent option,
select[class*="bg-transparent"] option,
select[class*="border-0"][class*="bg-transparent"] option {
  background: white !important;
  color: #111827 !important;
  padding: 8px 12px !important;
  font-size: 14px !important;
  border: none !important;
  /* Kill any native styling on options */
  -webkit-appearance: none !important;
  -moz-appearance: none !important;
  appearance: none !important;
}

.dark select.bg-transparent option,
.dark select[class*="bg-transparent"] option,
.dark select[class*="border-0"][class*="bg-transparent"] option {
  background: #2a2a2a !important;
  color: #e5e7eb !important;
}

/* iOS date input fix */
input[type="date"],
input[type="time"],
input[type="datetime-local"] {
  min-height: 48px !important;
  padding: 12px 16px !important;
}

/* Ensure consistent sizing on iOS devices */
@supports (-webkit-touch-callout: none) {
  /* iOS only styles */
  input,
  select,
  textarea {
    font-size: 16px !important;
    min-height: 48px !important;
    box-sizing: border-box !important;
  }
  
  select {
    padding-top: 12px !important;
    padding-bottom: 12px !important;
  }
}

/* Mobile-specific form element improvements */
@media (max-width: 768px) {
  input,
  select,
  textarea {
    min-height: 48px !important;
    font-size: 16px !important; /* Prevents zoom on mobile */
    touch-action: manipulation !important; /* Improves touch responsiveness */
  }
  
  /* Ensure dropdowns have enough tap area on mobile - ONLY non-transparent selects */
  select:not(.bg-transparent) {
    min-height: 48px !important;
    line-height: 48px !important;
    padding: 0 40px 0 16px !important;
  }
  
  /* Fix for iOS select height issue - ONLY non-transparent selects */
  select:not([multiple]):not(.bg-transparent) {
    height: 48px !important;
    line-height: normal !important;
    padding-top: 14px !important;
    padding-bottom: 14px !important;
  }
  
  /* Transparent selector mobile overrides - stay compact */
  select.bg-transparent,
  select[class*="bg-transparent"],
  select[class*="border-0"][class*="bg-transparent"] {
    min-height: 32px !important;
    height: 32px !important;
    line-height: 24px !important;
    padding: 4px 24px 4px 8px !important;
    font-size: 14px !important;
    background-position: right 6px center !important;
    background-size: 14px !important;
  }
}

:root:not(.dark) input:focus,
:root:not(.dark) select:focus,
:root:not(.dark) textarea:focus {
  border-color: #f97316 !important;
  outline: none !important;
  box-shadow: 0 0 0 3px rgba(249, 115, 22, 0.1) !important;
}

/* Light mode select options */
:root:not(.dark) select option {
  background: white !important;
  color: #111827 !important;
}

:root:not(.dark) select optgroup {
  background: #f9fafb !important;
  color: #6b7280 !important;
}

/* 1. FIX ICON BACKGROUNDS - ORANGE BOXES ISSUE */
.dark .bg-orange-100 {
  background: rgba(255, 140, 66, 0.1) !important;
  backdrop-filter: none !important;
}

.dark .bg-orange-500\/20 {
  background: rgba(255, 140, 66, 0.15) !important;
  backdrop-filter: none !important;
}

/* 2. FORCE ALL ORANGE BUTTONS TO BE ORANGE - REMOVE GLOW AND SHINE */
.dark .bg-orange-500.bg-orange-500,
.dark button.bg-orange-500.bg-orange-500,
.dark .bg-orange-500.bg-orange-500.bg-orange-500,
.dark button.bg-orange-500.bg-orange-500.bg-orange-500 {
  background: #f97316 !important;
  background-color: #f97316 !important;
  background-image: none !important;
  color: white !important;
  border: none !important;
  box-shadow: 0 2px 8px rgba(249, 115, 22, 0.25) !important;
  backdrop-filter: none !important;
  -webkit-backdrop-filter: none !important;
}

/* 3. OVERRIDE ANY GRAY STYLES ON ORANGE BUTTONS */
.dark .bg-gray-900.bg-orange-500,
.dark button.bg-gray-900.bg-orange-500,
.dark .bg-orange-500.bg-gray-900 {
  background: #f97316 !important;
  background-color: #f97316 !important;
  backdrop-filter: none !important;
  -webkit-backdrop-filter: none !important;
  box-shadow: 0 2px 8px rgba(249, 115, 22, 0.25) !important;
}

.dark .bg-orange-500:hover,
.dark button.bg-orange-500:hover {
  background: #ea580c !important;
  background-color: #ea580c !important;
  box-shadow: 0 4px 12px rgba(249, 115, 22, 0.3) !important;
  backdrop-filter: none !important;
  -webkit-backdrop-filter: none !important;
}

/* 4. FIX "VIEW ALL" BUTTONS - ONLY ORANGE TEXT, NOT BACKGROUND */
.dark .text-orange-600,
.dark .text-orange-500,
.dark [class*="text-orange"] {
  color: #f97316 !important;
  background: transparent !important;
  background-color: transparent !important;
}

/* 5. MODAL BACKGROUNDS - PROPER THEME SEPARATION */

/* DARK MODE MODALS - Clean dark backgrounds */
.dark .fixed .bg-white,
.dark .fixed .bg-gray-900,
.dark [role="dialog"] .bg-white,
.dark [role="dialog"] .bg-gray-900 {
  background: #1a1a1a !important;
  backdrop-filter: none !important;
  border: 1px solid rgba(255, 255, 255, 0.1) !important;
}

/* LIGHT MODE MODALS - Clean white backgrounds */
:root:not(.dark) .fixed .bg-white,
:root:not(.dark) .fixed .bg-gray-900,
:root:not(.dark) [role="dialog"] .bg-white,
:root:not(.dark) [role="dialog"] .bg-gray-900 {
  background: white !important;
  backdrop-filter: none !important;
  border: 1px solid #e5e7eb !important;
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05) !important;
}

/* 6. REMOVE UGLY BOXES FROM MODAL HEADERS */
.dark .fixed h1,
.dark .fixed h2,
.dark .fixed h3 {
  background: none !important;
  backdrop-filter: none !important;
  border: none !important;
  box-shadow: none !important;
}

/* 7. MODAL INPUTS - PROPER THEME SEPARATION */

/* DARK MODE MODAL INPUTS */
.dark .fixed input,
.dark .fixed select,
.dark .fixed textarea,
.dark [role="dialog"] input,
.dark [role="dialog"] select,
.dark [role="dialog"] textarea {
  background: #2a2a2a !important;
  border: 1px solid rgba(255, 255, 255, 0.1) !important;
  color: white !important;
}

/* LIGHT MODE MODAL INPUTS - Explicit light mode styling */
:root:not(.dark) .fixed input,
:root:not(.dark) .fixed select,
:root:not(.dark) .fixed textarea,
:root:not(.dark) [role="dialog"] input,
:root:not(.dark) [role="dialog"] select,
:root:not(.dark) [role="dialog"] textarea {
  background: white !important;
  border: 1px solid #d1d5db !important;
  color: #111827 !important;
}

/* Light mode focus states for modal inputs */
:root:not(.dark) .fixed input:focus,
:root:not(.dark) .fixed select:focus,
:root:not(.dark) .fixed textarea:focus,
:root:not(.dark) [role="dialog"] input:focus,
:root:not(.dark) [role="dialog"] select:focus,
:root:not(.dark) [role="dialog"] textarea:focus {
  border-color: #f97316 !important;
  outline: none !important;
  box-shadow: 0 0 0 3px rgba(249, 115, 22, 0.1) !important;
}