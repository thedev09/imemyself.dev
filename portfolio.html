<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Trade Management</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    /* Theme variables */
    :root {
      /* Dark theme (default) */
      --bg-gradient-start: #1a2236;
      --bg-gradient-end: #252e47;
      --text-primary: #eaeaea;
      --text-secondary: #a6b6ce;
      --text-highlight: #ace3e9;
      --bg-card: #222840;
      --bg-card-header: #28304c;
      --bg-button: #223567;
      --bg-button-hover: #20e59d;
      --text-button-hover: #222;
      --bg-secondary: #252e47;
      --border-color: #323c5f;
      --border-table: #31385c;
      --bg-progress: #373e5a;
      --color-win: #23e6b9;
      --color-loss: #fd2b49;
      --color-warning: #ffd500;
      --shadow-color: rgba(38, 52, 90, 0.14);
    }
    
    /* Light theme */
    body.light-theme {
      --bg-gradient-start: #f0f4f8;
      --bg-gradient-end: #e2e8f0;
      --text-primary: #1a202c;
      --text-secondary: #4a5568;
      --text-highlight: #2b6cb0;
      --bg-card: #ffffff;
      --bg-card-header: #e2e8f0;
      --bg-button: #e2e8f0;
      --bg-button-hover: #10b981;
      --text-button-hover: #ffffff;
      --bg-secondary: #f7fafc;
      --border-color: #cbd5e0;
      --border-table: #e2e8f0;
      --bg-progress: #e2e8f0;
      --color-win: #10b981;
      --color-loss: #ef4444;
      --color-warning: #f59e0b;
      --shadow-color: rgba(0, 0, 0, 0.1);
    }
    
    /* Reset and base */
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      background: linear-gradient(135deg, var(--bg-gradient-start) 0%, var(--bg-gradient-end) 100%);
      color: var(--text-primary);
      font-family: 'Segoe UI', Arial, sans-serif;
      padding: 30px;
      min-height: 100vh;
      transition: background 0.3s ease, color 0.3s ease;
    }
    h1, h2, h3 { font-weight: 700; margin-bottom: 12px; }
    .container {
      max-width: 1200px;
      margin: auto;
    }
    /* Header */
    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 28px;
    }
    .nav {
      display: flex;
      gap: 18px;
    }
    .nav button, .back-btn {
      background: var(--bg-button);
      border: none;
      color: var(--text-primary);
      padding: 8px 18px;
      border-radius: 24px;
      cursor: pointer;
      font-size: 15px;
      transition: all 0.3s ease;
    }
    .nav button.active, .back-btn:hover {
      background: var(--bg-button-hover);
      color: var(--text-button-hover);
      font-weight: bold;
    }
    .back-btn {
      font-size: 13px;
      margin-right: 15px;
      background: var(--bg-secondary);
    }
    .theme-toggle {
      background: var(--bg-secondary) !important;
      padding: 8px 12px !important;
      font-size: 18px !important;
    }
    .theme-toggle:hover {
      background: var(--bg-button) !important;
    }
    /* Card styles */
    .card {
      background: var(--bg-card);
      border-radius: 15px;
      padding: 24px 24px 18px 24px;
      margin-bottom: 32px;
      box-shadow: 0 2px 16px var(--shadow-color);
    }
    /* Active trades section */
    .trade-status {
      display: flex;
      align-items: center;
      margin-bottom: 22px;
      gap: 20px;
    }
    .trade-direction {
      padding: 6px 16px;
      border-radius: 14px;
      font-weight: bold;
      color: var(--color-win);
      background: var(--bg-card-header);
      margin-right: 10px;
      font-size: 16px;
    }
    .trade-info-grid {
      display: grid;
      grid-template-columns: repeat(6, 1fr);
      gap: 12px 20px;
      margin-bottom: 18px;
    }
    .trade-info-label {
      font-size: 13px;
      color: var(--text-secondary);
    }
    .trade-info-value {
      font-size: 15px;
      font-weight: 500;
      color: var(--color-win);
    }
    .progress-bar-wrap {
      width: 100%;
      background: var(--bg-progress);
      border-radius: 10px;
      height: 11px;
      margin-bottom: 10px;
      position: relative;
    }
    .progress-bar {
      height: 11px;
      border-radius: 10px;
      background: linear-gradient(90deg, #fd2b49 0%, #f8e54c 50%, #23e6b9 100%);
      transition: width 0.4s;
    }
    .progress-indicator {
      position: absolute;
      top: -5px;
      width: 2px;
      height: 21px;
      background: var(--bg-button-hover);
      left: 0;
      transform: translateX(-1px);
    }
    /* Trade history table */
    .filters {
      display: flex;
      gap: 12px;
      margin-bottom: 14px;
    }
    select {
      background: var(--bg-card);
      border: 1px solid var(--border-color);
      color: var(--text-primary);
      border-radius: 8px;
      padding: 5px 10px;
      font-size: 14px;
    }
    .history-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 15px;
      margin-bottom: 4px;
    }
    .history-table th, .history-table td {
      padding: 9px 12px;
      text-align: left;
    }
    .history-table th {
      background: var(--bg-card-header);
      color: var(--text-highlight);
      font-weight: bold;
      font-size: 14px;
    }
    .history-table tr {
      border-bottom: 1px solid var(--border-table);
    }
    .history-table td.win { color: var(--color-win); font-weight: 600; }
    .history-table td.loss { color: var(--color-loss); font-weight: 600; }
    .reason-badge {
      font-size: 12px;
      color: var(--color-warning);
      background: var(--bg-progress);
      border-radius: 6px;
      padding: 3px 8px;
      margin-left: 7px;
    }
    /* Performance statistics */
    .stats-table {
      width: 100%;
      margin-top: 8px;
      border-collapse: collapse;
      font-size: 15px;
    }
    .stats-table th, .stats-table td {
      padding: 9px 14px;
    }
    .stats-table th {
      background: var(--bg-card-header);
      color: var(--text-highlight);
    }
    .stats-table td {
      text-align: center;
    }
    .stats-table tr {
      border-bottom: 1px solid var(--border-table);
    }
    /* Responsive */
    @media (max-width: 900px) {
      .trade-info-grid {
        grid-template-columns: repeat(2, 1fr);
      }
      .container {
        padding: 8px;
      }
      .history-table, .stats-table {
        font-size: 13px;
      }
    }
    @media (max-width: 600px) {
      .header, .nav { flex-direction: column; gap: 8px; align-items: stretch; }
      .card { padding: 16px 8px; }
      .history-table, .stats-table { font-size: 12px; }
      .trade-info-grid { grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Header -->
    <div class="header">
      <div>
        <button class="back-btn" onclick="alert('Back to Dashboard')">‚Üê Back to Dashboard</button>
      </div>
      <h1>Trade Management</h1>
      <div class="nav">
        <button class="active">Live Trades</button>
        <button onclick="alert('Analytics under development!')">Analytics</button>
        <button class="theme-toggle" onclick="toggleTheme()" title="Toggle theme">
          <span class="theme-icon">üåô</span>
        </button>
      </div>
    </div>
    <!-- Active Trades -->
    <div class="card">
      <h2>Open Position</h2>
      <div class="trade-status">
        <span class="trade-direction">BUY</span>
        <span><b>USD/JPY</b></span>
        <span style="color:var(--color-win);font-size:16px;margin-left:18px;">+20.7 pips (+0.14%)</span>
      </div>
      <div class="trade-info-grid">
        <div>
          <div class="trade-info-label">Entry</div>
          <div class="trade-info-value" id="entryPrice">¬•148.449</div>
        </div>
        <div>
          <div class="trade-info-label">Current</div>
          <div class="trade-info-value" id="currentPrice">¬•148.656</div>
        </div>
        <div>
          <div class="trade-info-label">Duration</div>
          <div class="trade-info-value">8h 19m</div>
        </div>
        <div>
          <div class="trade-info-label">Confidence</div>
          <div class="trade-info-value" style="color:var(--color-warning);">60%</div>
        </div>
        <div>
          <div class="trade-info-label">Stop Loss</div>
          <div class="trade-info-value">¬•147.707</div>
        </div>
        <div>
          <div class="trade-info-label">Take Profit</div>
          <div class="trade-info-value">¬•149.649</div>
        </div>
      </div>
      <div class="progress-bar-wrap" style="margin-top:20px; margin-bottom:10px; position:relative;">
        <div id="progressBar" class="progress-bar" style="width:40%;"></div>
        <div id="progressIndicator" class="progress-indicator"></div>
      </div>
      <div style="display: flex; justify-content: space-between; font-size:13px; color:var(--text-secondary);">
        <span>SL: ¬•147.707</span>
        <span>TP: ¬•149.649</span>
      </div>
    </div>
    <!-- Trade History -->
    <div class="card">
      <h2>Trade History</h2>
      <div class="filters">
        <select>
          <option>All Engines</option>
        </select>
        <select>
          <option>All Results</option>
        </select>
        <select>
          <option>All Time</option>
        </select>
        <select>
          <option>All Symbols</option>
        </select>
      </div>
      <table class="history-table">
        <thead>
          <tr>
            <th>Symbol</th>
            <th>Time</th>
            <th>Open Price</th>
            <th>Close Price</th>
            <th>Take Profit</th>
            <th>Stop Loss</th>
            <th>Duration</th>
            <th>Win/Loss</th>
            <th>Reason</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>XAU/USD</td>
            <td>07/16 10:44 PM</td>
            <td>$3,331.91</td>
            <td>$3,353.10</td>
            <td>$3,275.91</td>
            <td>$3,335.15</td>
            <td>12h 58m</td>
            <td class="loss">Loss</td>
            <td>SL Hit<div class="reason-badge">Stop Loss</div></td>
          </tr>
          <tr>
            <td>BTC/USD</td>
            <td>07/16 08:49 PM</td>
            <td>$118,196</td>
            <td>$118,317</td>
            <td>$120,495</td>
            <td>$118,384</td>
            <td>1h 17m</td>
            <td class="loss">Loss</td>
            <td>SL Hit<div class="reason-badge">Stop Loss</div></td>
          </tr>
          <tr>
            <td>BTC/USD</td>
            <td>07/16 07:29 PM</td>
            <td>$118,725</td>
            <td>$119,704</td>
            <td>$119,775</td>
            <td>$119,004</td>
            <td>1h 8m</td>
            <td class="win">Win</td>
            <td>TP Hit<div class="reason-badge">Take Profit</div></td>
          </tr>
          <tr>
            <td>BTC/USD</td>
            <td>07/16 06:54 PM</td>
            <td>$118,484</td>
            <td>$119,064</td>
            <td>$119,594</td>
            <td>$119,554</td>
            <td>25m</td>
            <td class="loss">Loss</td>
            <td>SL Hit<div class="reason-badge">Stop Loss</div></td>
          </tr>
          <tr>
            <td>BTC/USD</td>
            <td>07/16 06:11 PM</td>
            <td>$118,987</td>
            <td>$119,172</td>
            <td>$119,305</td>
            <td>$118,775</td>
            <td>17m</td>
            <td class="loss">Loss</td>
            <td>SL Hit<div class="reason-badge">Stop Loss</div></td>
          </tr>
        </tbody>
      </table>
    </div>
    <!-- Performance Stats -->
    <div class="card">
      <h2>Performance Statistics</h2>
      <table class="stats-table">
        <thead>
          <tr>
            <th>Engine Name</th>
            <th>Total Trades</th>
            <th>Total Pips</th>
            <th>Win Rate</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Smart Analysis (V1)</td>
            <td>0</td>
            <td>+0.0</td>
            <td>0.0%</td>
          </tr>
          <tr>
            <td>AI Enhanced (V2)</td>
            <td>0</td>
            <td>+0.0</td>
            <td>0.0%</td>
          </tr>
          <tr>
            <td>Simple &amp; Effective (V3)</td>
            <td>5</td>
            <td style="color:var(--color-loss);font-weight:600;">-17.8</td>
            <td style="color:var(--color-win);font-weight:600;">20.0%</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
  <script>
    // Theme toggle functionality
    function toggleTheme() {
      const body = document.body;
      const themeIcon = document.querySelector('.theme-icon');
      
      if (body.classList.contains('light-theme')) {
        body.classList.remove('light-theme');
        themeIcon.textContent = 'üåô';
        localStorage.setItem('theme', 'dark');
      } else {
        body.classList.add('light-theme');
        themeIcon.textContent = '‚òÄÔ∏è';
        localStorage.setItem('theme', 'light');
      }
    }
    
    // Apply saved theme on load
    window.addEventListener('DOMContentLoaded', function() {
      const savedTheme = localStorage.getItem('theme');
      const themeIcon = document.querySelector('.theme-icon');
      
      if (savedTheme === 'light') {
        document.body.classList.add('light-theme');
        themeIcon.textContent = '‚òÄÔ∏è';
      }
    });
    
    // Update the Progress Bar and Indicator Position for Active Trades
    const entry = 148.449;
    const current = 148.656;
    const sl = 147.707;
    const tp = 149.649;
    // Calculate relative percentage (from SL to TP)
    const progress =
      ((current - sl) / (tp - sl)) * 100;
    document.getElementById('progressBar').style.width = progress + '%';
    document.getElementById('progressIndicator').style.left = `calc(${progress}% - 1px)`;
  </script>
</body>
</html>
